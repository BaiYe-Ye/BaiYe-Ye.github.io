<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>白夜的小窝</title>
    <link rel="stylesheet" href="style.css">
    <!-- 色彩魔法和动态效果所需的CSS和JS -->
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- 加载动画 -->
    <div id="loading-animation" class="loading-animation">
        <div class="loading-content">
            <div class="loading-code">
                <div class="code-line">const blog = new Blog();</div>
                <div class="code-line">blog.initColorMagic();</div>
                <div class="code-line">blog.addDynamicEffects();</div>
                <div class="code-line">blog.loadArticles();</div>
                <div class="code-line">blog.startServer();</div>
            </div>
            <div class="loading-progress">
                <div class="progress-dots">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 快捷访问导航 -->
    <div class="quick-nav-container">
        <nav class="quick-nav">
            <a href="#intro" class="quick-nav-link">个人介绍</a>
            <a href="#blog" class="quick-nav-link">我的博文</a>
            <a href="#github" class="quick-nav-link">GitHub</a>
        </nav>
    </div>
    
    <!-- 深色模式切换按钮 -->
    <div class="theme-toggle-container">
        <button id="theme-toggle" class="theme-toggle-btn" title="切换深色/浅色模式">
            <span class="toggle-icon">🌙</span>
        </button>
        
        <!-- 音乐控制按钮 -->
        <button id="music-toggle" class="music-toggle-btn" title="暂停/播放背景音乐">
            <span class="music-icon">🔊</span>
        </button>
        
        <!-- 朝鲜国旗按钮 -->
        <button id="korea-toggle" class="korea-toggle-btn" title="切换主题">
            <span class="korea-icon">🇰🇵</span>
        </button>
    </div>
    
    <!-- 弹幕容器 -->
    <div id="danmaku-container"></div>
    
    <!-- 粒子效果容器 -->
    <div id="particles-container" class="particles-container"></div>
    
    <!-- 主容器 -->
    <div class="main-container">
        <!-- 左侧个人信息卡片 -->
        <div class="profile-card">
            <div class="avatar-container">
                <img src="http://q.qlogo.cn/headimg_dl?dst_uin=3145621688&spec=640&img_type=jpg" alt="QQ头像" class="avatar">
            </div>
            <h2 class="name">白夜</h2>
            <p class="title">Full-stack Developer</p>
            <a href="https://github.com/BaiYe-Ye" class="github-btn" target="_blank">访问我的GitHub</a>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number">22</div>
                    <div class="stat-label">总仓库数</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">23</div>
                    <div class="stat-label">总Stars</div>
                </div>
            </div>
            
            <div class="tech-stack">
                <h3 class="section-title">技术栈</h3>
                <div class="tech-tags" id="tech-stack">
                    <div class="loading">正在加载技术栈...</div>
                </div>
            </div>
        </div>
        
        <!-- 右侧内容区域 -->
        <div class="content-area">
            <!-- 个人介绍卡片 -->
            <div id="intro" class="intro-card">
                <div class="card-header">
                    <h3 class="card-title">个人介绍</h3>
                </div>
                <div class="card-content">
                    <p class="intro-text">你好，我是白夜，一名热爱技术的开发者。</p>
                    <ul class="intro-list">
                        <li>📱 专注于全栈开发和用户体验设计</li>
                        <li>💻 熟悉HTML、CSS、JavaScript等前端技术栈</li>
                        <li>🐍 热爱Python编程，喜欢探索新技术</li>
                        <li>📝 喜欢分享技术知识，记录学习心得</li>
                        <li>🌱 持续学习，不断进步</li>
                    </ul>
                </div>
            </div>
            
            <!-- 我的博文卡片 -->
            <div id="blog" class="blog-card">
                <div class="card-header">
                    <h3 class="card-title">我的博文</h3>
                </div>
                <div class="card-content">
                    <!-- 博客文章列表 -->
                    <div class="blog-posts">
                        <!-- 示例文章1 -->
                                                <!-- 文章 -->
                        <div class="blog-post-item" data-post-id="post--">
                            <div class="post-info">
                                <h4 class="post-title"><a href="#post--" onclick="togglePostContent('post--'); return false;">中国网民们“金正日笑话七则” 让人笑破肚皮</a></h4>
                                <p class="post-meta">2025-12-06 • 其他</p>
                                <p class="post-excerpt">关于奇怪无比的邻国朝鲜领导人金正日的帖子，在喜欢幽默与讽刺的中国网民当中理所当然具有很高人气。 最近，题为“北朝鲜笑话七则“的帖子在中国网民当中的人气非常高。该帖中描写的有关金正日的笑话，敏锐地指出了朝鲜社会存在的矛盾。现将转载中国教育在线(http://eol.cn)的“北朝鲜笑话七则”介绍给读者。 中国网民看透金正日和朝鲜体制一面的才华，很是让人叹服。 ▲故事一： 集体农庄庄员郑龙万在...</p>
                                <div class="post-content" style="display: none;">
                                    关于奇怪无比的邻国朝鲜领导人金正日的帖子，在喜欢幽默与讽刺的中国网民当中理所当然具有很高人气。

最近，题为“北朝鲜笑话七则“的帖子在中国网民当中的人气非常高。该帖中描写的有关金正日的笑话，敏锐地指出了朝鲜社会存在的矛盾。现将转载中国教育在线(http://eol.cn)的“北朝鲜笑话七则”介绍给读者。

中国网民看透金正日和朝鲜体制一面的才华，很是让人叹服。

▲故事一：

集体农庄庄员郑龙万在河里捉到一条大鱼，高兴的回到家里和老婆说：“看，我们有炸鱼吃了！”“没有油啊。”“那就煮！”“没锅。” “烤鱼！”“没柴。”郑龙万气死了，走到河边把鱼扔了回去。那鱼在水里划了一个半圆，上身出水，举起右鳍激动地高呼：“金正日万岁！”

▲故事二：

美术馆里有一幅描写亚当和夏娃的画。一个英国人看了，说：“他们一定是英国人，男士有好吃的东西就和女士分享。”一个法国人看了，说：“他们一定是法国人，情侣裸体散步。”一个朝鲜人看了，说：“他们一定是朝鲜人，他们没有衣服，吃得很少，却还以为自己在天堂！”

▲故事三：

金正日视察农场，看到猪儿乖乖，一时兴起站在猪中间照了张相。待到报纸准备发表时，编辑为照片的标题犯了难。“金正日同志和猪在一起”不好。“猪和金正日同志在一起”也不好。……报纸出版后，照片下的说明文字是：“左起第三位是金正日同志。”

▲故事四：

一个英国人，一个法国人，一个朝鲜人在一起聊天。英国人：最幸福的事情就是冬天晚上回家，穿着羊毛裤坐在壁炉前面。法国人：你们英国人就是古板，最幸福的事情是和一个金发女郎一起去地中海度假，然后我们好和好散。朝鲜人：最幸福的事情就是半夜有人敲门，开门后：“ 康成美，你被捕了。”“你弄错了，康成美在隔壁。”

▲故事五：

金正日和俄罗斯总统普京在莫斯科开会，休息时间两个人很无聊，就开始比谁的保镖更忠诚。普京先来，他把自己的保镖叫进来，推开窗（外面是20层楼）说：“伊万，从这里跳下去！”伊万哭着说：“你怎么能这样呢，总统先生，我还有老婆孩子呐。”普京被感动了，流着泪说是自己不对，叫伊万走了，然后轮到金正日，他也大声叫自己的保镖李明万。“李明万，从这里跳下去！”李明万二话不说就要往下跳，普京一把抱住他说：“你疯了？跳下去会死的！”李明万一边挣扎着要跳下去一边说：“放开我，混蛋，我还有老婆孩子呐。”

▲故事六：

平壤地铁中。“同志您好。”“您好。”“请问您是委员会的同志吗？”“不是。”“您以前是吗？”“不是。” “您的直系亲属中有在委员会工作的吗？”“没有。”“那么请你把脚挪开，你踩着我了。”

▲故事七：

布什、普京和金正日会谈后在白宫外散步，一只小狗从边走过。三人想比一下， 看谁的本事大，能让小狗往回跑。布什向小狗喊：“回来吧，我们美国有富裕的生活， 有民主和自由”，小狗象没听见似的仍往前跑。普京向小狗喊：“回来吧，我们有广阔的国土和丰富的石油。”，小狗依然往前跑。金正日走上前对小狗轻轻地说了一句话，小狗马上调头就往回跑。布什和普京都敬佩不已，问金正日说的是什么。金正日说：“我告诉小狗，前面有朝鲜主体思想。”
                                </div>
                            </div>
                            <div class="post-actions">
                                <a href="#post--" class="read-more" onclick="togglePostContent('post--'); return false;">阅读更多</a>
                            </div>
                        </div>
<div class="blog-post-item" data-post-id="post-1">
                            <div class="post-info">
                                <h4 class="post-title"><a href="#post-1">新博客功能介绍</a></h4>
                                <p class="post-meta">2025-12-06 • 技术</p>
                                <p class="post-excerpt">本文介绍了博客的新功能，包括文章阅读功能、响应式设计等...</p>
                                <div class="post-content" style="display: none;">
                                    <h5>功能特点</h5>
                                    <p>1. <strong>文章阅读功能</strong>：点击"阅读更多"可以查看完整文章内容</p>
                                    <p>2. <strong>响应式设计</strong>：适配不同屏幕尺寸</p>
                                    <p>3. <strong>随机一言</strong>：每次刷新页面都会显示不同的名言警句</p>
                                    <p>4. <strong>CSDN随机文章</strong>：展示CSDN上的随机文章推荐</p>
                                    <h5>使用说明</h5>
                                    <p>在首页或分类页点击文章标题或"阅读更多"链接，即可查看完整文章内容。再次点击可以收起文章。</p>
                                </div>
                            </div>
                            <div class="post-actions">
                                <a href="#post-1" class="read-more" onclick="togglePostContent('post-1'); return false;">阅读更多</a>
                            </div>
                        </div>
                        
                        <!-- 示例文章2 -->
                        <div class="blog-post-item" data-post-id="post-2">
                            <div class="post-info">
                                <h4 class="post-title"><a href="#post-2">我的编程学习之路</a></h4>
                                <p class="post-meta">2025-12-05 • 生活</p>
                                <p class="post-excerpt">分享我的编程学习经历和心得，希望对初学者有所帮助...</p>
                                <div class="post-content" style="display: none;">
                                    <p>从接触编程到现在已经有多年时间，回顾这段学习历程，有很多收获和感悟。</p>
                                    <h5>学习阶段</h5>
                                    <ol>
                                        <li><strong>入门阶段</strong>：学习HTML、CSS和JavaScript基础</li>
                                        <li><strong>进阶阶段</strong>：学习框架和库，如React、Vue等</li>
                                        <li><strong>实践阶段</strong>：参与实际项目开发，积累经验</li>
                                        <li><strong>深入阶段</strong>：研究底层原理和性能优化</li>
                                    </ol>
                                    <h5>学习建议</h5>
                                    <ul>
                                        <li>坚持每天学习，哪怕只有半小时</li>
                                        <li>多动手实践，写代码是最好的学习方式</li>
                                        <li>阅读优秀的开源代码</li>
                                        <li>参与技术社区，与其他开发者交流</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="post-actions">
                                <a href="#post-2" class="read-more" onclick="togglePostContent('post-2'); return false;">阅读更多</a>
                            </div>
                        </div>
                        
                        <!-- 示例文章3 -->
                        <div class="blog-post-item" data-post-id="post-3">
                            <div class="post-info">
                                <h4 class="post-title"><a href="#post-3">前端开发趋势</a></h4>
                                <p class="post-meta">2025-12-06 • 技术</p>
                                <p class="post-excerpt">探讨当前前端开发的趋势和未来发展方向...</p>
                                <div class="post-content" style="display: none;">
                                    <h5>当前趋势</h5>
                                    <p>1. <strong>AI辅助开发</strong>：越来越多的开发者开始使用AI工具辅助编程</p>
                                    <p>2. <strong>WebAssembly</strong>：提高Web应用性能</p>
                                    <p>3. <strong>响应式设计</strong>：适配各种设备尺寸</p>
                                    <p>4. <strong>微前端架构</strong>：大型应用的模块化解决方案</p>
                                    <h5>未来展望</h5>
                                    <p>前端开发将继续向更高效、更智能的方向发展，开发者需要不断学习新技能，适应技术变化。</p>
                                </div>
                            </div>
                            <div class="post-actions">
                                <a href="#post-3" class="read-more" onclick="togglePostContent('post-3'); return false;">阅读更多</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 活动图表卡片 -->
            <div id="github" class="activity-chart-card intro-card">
                <div class="card-header">
                    <h3 class="card-title">GitHub活动概览</h3>
                </div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="activity-chart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- GitHub仓库卡片 -->
            <div class="github-repos-card intro-card">
                <div class="card-header">
                    <h3 class="card-title">GitHub仓库</h3>
                </div>
                <div class="card-content">
                    <!-- GitHub仓库列表 -->
                    <div class="github-repos" id="github-repos">
                        <div class="loading">正在加载GitHub仓库...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 彩蛋容器 -->
    <div id="easter-egg-container" class="easter-egg-container"></div>
    
    <!-- 隐藏彩蛋 - 输入特定序列可触发 -->
    <div id="hidden-easter-egg" class="hidden-easter-egg">
        <div class="easter-egg-content">
            <h2>🎉 恭喜你发现了隐藏彩蛋！</h2>
            <p>你是一个细心的访客，这是给你的惊喜奖励！</p>
            <div class="easter-egg-emoji">✨🎊🎁✨</div>
            <button id="close-easter-egg" class="close-easter-egg-btn">关闭</button>
        </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 白夜的小窝. All rights reserved.</p>
            <p class="footer-easter-egg">🎉 彩蛋提示：尝试输入特定序列...</p>
        </div>
    </footer>
    
    <!-- 背景音乐 -->
    <audio id="background-music" autoplay loop hidden>
        <source src="music/Shake and Sway.mp3" type="audio/mpeg">
        您的浏览器不支持音频播放
    </audio>

    <!-- JavaScript -->
    <script>
        // 色彩魔法 - 随时间变化的动态配色
        function applyTimeBasedColors() {
            const now = new Date();
            const hour = now.getHours();
            
            let gradientColors, bgColor;
            
            if (hour >= 6 && hour < 12) {
                // 早晨清新蓝
                gradientColors = ['rgba(102, 179, 234, 0.8)', 'rgba(118, 200, 255, 0.8)'];
                bgColor = 'rgba(235, 245, 255, 0.95)';
            } else if (hour >= 12 && hour < 18) {
                // 午后温暖黄
                gradientColors = ['rgba(255, 214, 0, 0.8)', 'rgba(255, 159, 64, 0.8)'];
                bgColor = 'rgba(255, 248, 235, 0.95)';
            } else {
                // 夜晚深邃紫
                gradientColors = ['rgba(102, 126, 234, 0.8)', 'rgba(118, 75, 162, 0.8)'];
                bgColor = 'rgba(240, 235, 255, 0.95)';
            }
            
            // 应用背景渐变
            document.body.style.background = `linear-gradient(135deg, ${gradientColors[0]}, ${gradientColors[1]}), url('backpicture/wallhaven-rrdom7.webp')`;
            
            // 更新CSS变量，用于其他元素使用时间相关颜色
            document.documentElement.style.setProperty('--time-gradient-start', gradientColors[0]);
            document.documentElement.style.setProperty('--time-gradient-end', gradientColors[1]);
            document.documentElement.style.setProperty('--time-bg-color', bgColor);
        }
        
        // 色彩魔法 - 季节感应配色
        function applySeasonBasedColors() {
            const now = new Date();
            const month = now.getMonth();
            
            let seasonColor, seasonGradient, seasonTextColor;
            
            if (month >= 2 && month < 5) {
                // 春季 - 春樱粉
                seasonColor = getComputedStyle(document.documentElement).getPropertyValue('--spring-color');
                seasonGradient = 'linear-gradient(135deg, rgba(255, 179, 186, 0.6), rgba(255, 200, 210, 0.6))';
                seasonTextColor = '#ff6b9d';
            } else if (month >= 5 && month < 8) {
                // 夏季 - 夏海蓝
                seasonColor = getComputedStyle(document.documentElement).getPropertyValue('--summer-color');
                seasonGradient = 'linear-gradient(135deg, rgba(186, 225, 255, 0.6), rgba(150, 200, 255, 0.6))';
                seasonTextColor = '#4facfe';
            } else if (month >= 8 && month < 11) {
                // 秋季 - 秋叶橙
                seasonColor = getComputedStyle(document.documentElement).getPropertyValue('--autumn-color');
                seasonGradient = 'linear-gradient(135deg, rgba(255, 166, 158, 0.6), rgba(255, 180, 160, 0.6))';
                seasonTextColor = '#ff6348';
            } else {
                // 冬季 - 冬雪白
                seasonColor = getComputedStyle(document.documentElement).getPropertyValue('--winter-color');
                seasonGradient = 'linear-gradient(135deg, rgba(232, 244, 248, 0.6), rgba(240, 245, 255, 0.6))';
                seasonTextColor = '#87ceeb';
            }
            
            // 更新CSS变量
            document.documentElement.style.setProperty('--season-color', seasonColor);
            document.documentElement.style.setProperty('--season-gradient', seasonGradient);
            document.documentElement.style.setProperty('--season-text-color', seasonTextColor);
            
            // 应用季节色到卡片元素
            const cards = document.querySelectorAll('.intro-card, .blog-card, .github-repos-card, .activity-chart-card');
            cards.forEach(card => {
                card.style.background = seasonGradient;
                card.style.backgroundBlendMode = 'overlay';
            });
        }
        
        // 色彩魔法 - 根据文章类别自动匹配主题色
        function applyCategoryColors() {
            const posts = document.querySelectorAll('.blog-post-item');
            
            posts.forEach(post => {
                const category = post.querySelector('.post-meta').textContent.split('•')[1].trim();
                let categoryColor, categoryBg, categoryText, categoryGradient;
                
                if (category === '技术') {
                    // 技术文 - 科技蓝
                    categoryColor = getComputedStyle(document.documentElement).getPropertyValue('--tech-color');
                    categoryBg = 'rgba(55, 66, 250, 0.1)';
                    categoryText = '#3742fa';
                    categoryGradient = 'linear-gradient(135deg, rgba(55, 66, 250, 0.1), rgba(79, 172, 254, 0.1))';
                } else if (category === '生活') {
                    // 生活文 - 自然绿
                    categoryColor = getComputedStyle(document.documentElement).getPropertyValue('--life-color');
                    categoryBg = 'rgba(46, 213, 115, 0.1)';
                    categoryText = '#2ed573';
                    categoryGradient = 'linear-gradient(135deg, rgba(46, 213, 115, 0.1), rgba(67, 233, 123, 0.1))';
                } else if (category === '思考') {
                    // 思考文 - 哲学灰
                    categoryColor = getComputedStyle(document.documentElement).getPropertyValue('--thought-color');
                    categoryBg = 'rgba(87, 96, 111, 0.1)';
                    categoryText = '#57606f';
                    categoryGradient = 'linear-gradient(135deg, rgba(87, 96, 111, 0.1), rgba(139, 148, 158, 0.1))';
                } else {
                    // 其他 - 默认主题色
                    categoryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-color-1');
                    categoryBg = 'rgba(102, 126, 234, 0.1)';
                    categoryText = '#667eea';
                    categoryGradient = 'linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))';
                }
                
                // 应用类别配色到文章卡片
                post.style.borderLeft = `4px solid ${categoryColor}`;
                post.style.background = categoryGradient;
                post.style.borderColor = `${categoryColor}33`;
                
                // 应用类别色到文章标题
                const title = post.querySelector('.post-title a');
                if (title) {
                    title.style.color = categoryColor;
                }
                
                // 应用类别色到阅读更多按钮
                const readMore = post.querySelector('.read-more');
                if (readMore) {
                    readMore.style.backgroundColor = categoryColor;
                }
            });
        }
        
        // 色彩魔法 - 页面滚动时的视差效果
        function applyParallaxEffect() {
            const scrolled = window.pageYOffset;
            
            // 背景层 - 慢速移动
            document.body.style.backgroundPositionY = `${scrolled * -0.1}px`;
            
            // 内容层 - 中速移动
            const mainContainer = document.querySelector('.main-container');
            if (mainContainer) {
                mainContainer.style.transform = `translateY(${scrolled * -0.2}px)`;
            }
            
            // 个人信息卡片 - 更慢移动
            const profileCard = document.querySelector('.profile-card');
            if (profileCard) {
                profileCard.style.transform = `translateY(${scrolled * -0.3}px)`;
            }
            
            // 卡片元素 - 不同速度移动
            const cards = document.querySelectorAll('.intro-card, .blog-card, .github-repos-card, .activity-chart-card');
            cards.forEach((card, index) => {
                const rate = scrolled * (-0.4 - index * 0.1);
                card.style.transform = `translateY(${rate}px)`;
            });
            
            // 快捷访问导航 - 固定位置但有缩放效果
            const quickNav = document.querySelector('.quick-nav-container');
            if (quickNav) {
                const scale = 1 - scrolled * 0.0005;
                quickNav.style.transform = `translateX(-50%) scale(${scale})`;
            }
        }
        
        // 色彩魔法 - 地理位置配色
        function applyGeolocationColors() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const latitude = position.coords.latitude;
                    let locationColor, locationGradient, locationAccent;
                    
                    if (latitude >= 0) {
                        // 北半球（北方）用户看到冷色调
                        locationColor = getComputedStyle(document.documentElement).getPropertyValue('--north-color');
                        locationGradient = 'linear-gradient(135deg, rgba(79, 172, 254, 0.3), rgba(0, 242, 254, 0.3))';
                        locationAccent = '#4facfe';
                    } else {
                        // 南半球（南方）用户看到暖色调
                        locationColor = getComputedStyle(document.documentElement).getPropertyValue('--south-color');
                        locationGradient = 'linear-gradient(135deg, rgba(250, 112, 154, 0.3), rgba(254, 225, 64, 0.3))';
                        locationAccent = '#fa709a';
                    }
                    
                    // 更新CSS变量
                    document.documentElement.style.setProperty('--location-color', locationColor);
                    document.documentElement.style.setProperty('--location-gradient', locationGradient);
                    document.documentElement.style.setProperty('--location-accent', locationAccent);
                    
                    // 应用地理位置色到个人信息卡片
                    const profileCard = document.querySelector('.profile-card');
                    if (profileCard) {
                        profileCard.style.border = `1px solid ${locationColor}80`;
                        profileCard.style.boxShadow = `0 8px 32px ${locationColor}20`;
                    }
                    
                    // 应用地理位置色到GitHub按钮和链接
                    const githubElements = document.querySelectorAll('.github-btn, .repo-name a');
                    githubElements.forEach(element => {
                        element.style.backgroundColor = locationColor;
                    });
                });
            }
        }
        
        // 色彩魔法 - 基于阅读进度的背景渐变
        function applyReadingProgressBackground() {
            const scrollPosition = window.pageYOffset;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            const totalScrollableDistance = documentHeight - windowHeight;
            
            // 计算阅读进度（0到1之间）
            const progress = Math.min(scrollPosition / totalScrollableDistance, 1);
            
            // 定义开始和结束颜色
            const startColor = 'rgba(102, 126, 234, 0.8)';
            const endColor = 'rgba(118, 75, 162, 0.8)';
            
            // 计算当前渐变颜色
            const currentGradient = `linear-gradient(135deg, ${startColor}, ${endColor})`;
            
            // 应用渐变到页面顶部的进度条
            let progressBar = document.getElementById('reading-progress-bar');
            if (!progressBar) {
                // 如果进度条不存在，创建它
                progressBar = document.createElement('div');
                progressBar.id = 'reading-progress-bar';
                progressBar.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 4px;
                    background: ${currentGradient};
                    z-index: 9999;
                    transform-origin: left;
                    transition: transform 0.1s ease;
                `;
                document.body.appendChild(progressBar);
            }
            
            // 更新进度条宽度
            progressBar.style.transform = `scaleX(${progress})`;
        }
        
        // 设备专属优化 - 设备识别
        const deviceInfo = {
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            isTablet: /iPad|Android(?!.*Mobile)/i.test(navigator.userAgent),
            isDesktop: !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            screenWidth: window.innerWidth,
            screenHeight: window.innerHeight
        };
        
        // 设备专属优化 - 根据设备类型调整交互效果
        function applyDeviceSpecificEffects() {
            // 桌面端专属效果
            if (deviceInfo.isDesktop) {
                // 启用精细动画
                document.body.classList.add('desktop-effects');
                
                // 启用复杂鼠标交互
                document.body.classList.add('desktop-interactions');
            }
            
            // 移动端专属效果
            if (deviceInfo.isMobile) {
                // 禁用某些复杂动画以提高性能
                document.body.classList.add('mobile-effects');
                
                // 添加触摸反馈支持
                const interactiveElements = document.querySelectorAll('a, button, .read-more, .github-btn');
                interactiveElements.forEach(element => {
                    element.addEventListener('touchstart', () => {
                        element.style.transform = 'scale(0.95)';
                    });
                    
                    element.addEventListener('touchend', () => {
                        element.style.transform = 'scale(1)';
                    });
                });
            }
            
            // 平板中间态
            if (deviceInfo.isTablet) {
                document.body.classList.add('tablet-effects');
            }
        }
        
        // 跨设备连贯性 - 保存阅读进度
        function saveReadingProgress() {
            const scrollPosition = window.pageYOffset;
            const url = window.location.href;
            
            // 保存到localStorage
            localStorage.setItem(`reading-progress-${url}`, scrollPosition.toString());
        }
        
        // 跨设备连贯性 - 恢复阅读进度
        function restoreReadingProgress() {
            const url = window.location.href;
            const savedProgress = localStorage.getItem(`reading-progress-${url}`);
            
            if (savedProgress) {
                window.scrollTo(0, parseInt(savedProgress));
            }
        }
        
        // 初始化色彩魔法
        function initColorMagic() {
            // 应用时间基础配色
            applyTimeBasedColors();
            
            // 应用季节基础配色
            applySeasonBasedColors();
            
            // 应用地理位置配色
            applyGeolocationColors();
            
            // 应用文章类别配色
            applyCategoryColors();
            
            // 应用设备专属效果
            applyDeviceSpecificEffects();
            
            // 监听滚动事件，应用视差效果、阅读进度背景和保存阅读进度
            window.addEventListener('scroll', () => {
                applyParallaxEffect();
                applyReadingProgressBackground();
                saveReadingProgress();
            });
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化色彩魔法
            initColorMagic();
            
            // 隐藏加载动画
            const loadingAnimation = document.getElementById('loading-animation');
            if (loadingAnimation) {
                // 等待所有代码行动画完成后隐藏
                setTimeout(() => {
                    loadingAnimation.classList.add('hidden');
                    // 页面加载完成后应用淡入效果
                    document.body.style.opacity = '0';
                    document.body.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        document.body.style.opacity = '1';
                    }, 100);
                }, 2000);
            }
        });
        
        // 文章阅读功能 - 切换文章内容显示/隐藏
        function togglePostContent(postId) {
            // 获取文章元素
            const post = document.querySelector(`[data-post-id="${postId}"]`);
            if (!post) return;
            
            // 获取文章内容元素
            const content = post.querySelector('.post-content');
            const readMoreLink = post.querySelector('.read-more');
            const excerpt = post.querySelector('.post-excerpt');
            
            if (!content || !readMoreLink || !excerpt) return;
            
            // 切换显示/隐藏状态
            if (content.style.display === 'none' || content.style.display === '') {
                // 显示完整内容
                content.style.display = 'block';
                readMoreLink.textContent = '收起全文';
            } else {
                // 隐藏完整内容
                content.style.display = 'none';
                readMoreLink.textContent = '阅读更多';
            }
        }
        
        // 深色/浅色模式切换功能
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化主题
            initTheme();
            
            // 绑定主题切换事件
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // 初始化背景音乐控制
            initMusicControl();
            
            // 初始化朝鲜国旗按钮
            initKoreaToggle();
            
            // 加载GitHub仓库信息
            loadGitHubRepos();
        });
        
        // 初始化背景音乐控制
        function initMusicControl() {
            const musicToggle = document.getElementById('music-toggle');
            const backgroundMusic = document.getElementById('background-music');
            const musicIcon = musicToggle.querySelector('.music-icon');
            
            if (!musicToggle || !backgroundMusic || !musicIcon) return;
            
            // 绑定音乐切换事件
            musicToggle.addEventListener('click', function() {
                if (backgroundMusic.paused) {
                    // 播放音乐
                    backgroundMusic.play().catch(error => {
                        console.error('播放音乐失败:', error);
                    });
                    musicIcon.textContent = '🔊';
                    musicToggle.title = '暂停背景音乐';
                } else {
                    // 暂停音乐
                    backgroundMusic.pause();
                    musicIcon.textContent = '🔇';
                    musicToggle.title = '播放背景音乐';
                }
            });
        }
        
        // 初始化朝鲜国旗按钮
        function initKoreaToggle() {
            const koreaToggle = document.getElementById('korea-toggle');
            if (!koreaToggle) {
                console.error('朝鲜国旗按钮未找到');
                return;
            }
            
            // 绑定点击事件
            koreaToggle.addEventListener('click', function() {
                console.log('朝鲜国旗按钮被点击');
                
                // 1. 将界面颜色改为红色
                document.body.style.background = 'linear-gradient(135deg, rgba(255, 0, 0, 0.9), rgba(200, 0, 0, 0.9))';
                document.body.style.backgroundImage = 'url(images/-C.webp)';
                document.body.style.backgroundBlendMode = 'overlay';
                document.body.style.backgroundSize = 'cover';
                document.body.style.backgroundPosition = 'center';
                document.body.style.backgroundAttachment = 'fixed';
                document.body.classList.remove('dark-mode');
                
                // 2. 更改头像
                const avatar = document.querySelector('.avatar');
                if (avatar) {
                    avatar.src = 'images/OIP-C.webp';
                    avatar.onerror = function() {
                        console.error('头像加载失败');
                    };
                } else {
                    console.error('头像元素未找到');
                }
                
                // 3. 更改名字为太阳
                const nameElement = document.querySelector('.name');
                if (nameElement) {
                    nameElement.textContent = '太阳';
                }
                
                // 4. 切换背景音乐并自动播放
                const backgroundMusic = document.getElementById('background-music');
                if (backgroundMusic) {
                    backgroundMusic.src = 'music/w.mp3';
                    backgroundMusic.play().catch(error => {
                        console.error('播放音乐失败:', error);
                    });
                }
                
                // 5. 播放弹幕
                playDanmaku();
            });
        }
        
        // 播放弹幕
        function playDanmaku() {
            const container = document.getElementById('danmaku-container');
            if (!container) return;
            
            // 弹幕内容 - 修复反斜杠显示问题
            const danmakuContents = ['(\O/)', '(😭🙌)', '(😭✍️)'];
            
            // 清空现有弹幕
            container.innerHTML = '';
            
            // 创建多个弹幕
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const danmaku = document.createElement('div');
                    danmaku.className = 'danmaku';
                    
                    // 随机选择弹幕内容
                    const content = danmakuContents[Math.floor(Math.random() * danmakuContents.length)];
                    danmaku.textContent = content;
                    
                    // 随机位置和样式
                    const top = Math.random() * (container.clientHeight - 40);
                    const fontSize = 20 + Math.random() * 20;
                    const duration = 5 + Math.random() * 5;
                    const color = `hsl(${Math.random() * 60}, 100%, 50%)`;
                    
                    // 设置样式
                    danmaku.style.top = `${top}px`;
                    danmaku.style.fontSize = `${fontSize}px`;
                    danmaku.style.color = color;
                    danmaku.style.animationDuration = `${duration}s`;
                    
                    // 添加到容器
                    container.appendChild(danmaku);
                    
                    // 自动移除弹幕
                    setTimeout(() => {
                        if (danmaku.parentNode) {
                            danmaku.parentNode.removeChild(danmaku);
                        }
                    }, duration * 1000);
                }, i * 200);
            }
        }
        
        // 主题系统 - 支持多种预设主题
        const themes = {
            'light': {
                name: '浅色模式',
                icon: '🌙',
                class: '',
                description: '清新明亮的浅色主题'
            },
            'dark': {
                name: '深色模式',
                icon: '☀️',
                class: 'dark-mode',
                description: '护眼舒适的深色主题'
            },
            'work': {
                name: '工作模式',
                icon: '💼',
                class: 'work-mode',
                description: '专注高效的工作主题'
            },
            'reading': {
                name: '阅读模式',
                icon: '📖',
                class: 'reading-mode',
                description: '护眼舒适的阅读主题'
            },
            'creative': {
                name: '创意模式',
                icon: '🎨',
                class: 'creative-mode',
                description: '激发灵感的创意主题'
            }
        };
        
        // 初始化主题
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            
            // 应用主题
            applyTheme(savedTheme);
        }
        
        // 切换主题
        function toggleTheme() {
            const currentTheme = localStorage.getItem('theme') || 'light';
            const themeKeys = Object.keys(themes);
            const currentIndex = themeKeys.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themeKeys.length;
            const nextTheme = themeKeys[nextIndex];
            
            // 添加切换动画类
            document.body.classList.add('theme-transitioning');
            
            // 延迟应用主题，让过渡动画生效
            setTimeout(() => {
                applyTheme(nextTheme);
                
                // 移除切换动画类
                setTimeout(() => {
                    document.body.classList.remove('theme-transitioning');
                }, 500);
            }, 100);
        }
        
        // 应用主题
        function applyTheme(themeName) {
            const body = document.body;
            const toggleBtn = document.getElementById('theme-toggle');
            const toggleIcon = toggleBtn ? toggleBtn.querySelector('.toggle-icon') : null;
            
            // 添加过渡动画类
            body.classList.add('theme-changing');
            
            // 移除所有主题class
            body.className = body.className.replace(/(?:^|\s)(dark|work|reading|creative)-mode(?!\S)/g, '').trim();
            
            // 添加当前主题class
            const theme = themes[themeName];
            if (theme && theme.class) {
                body.classList.add(theme.class);
            }
            
            // 更新图标
            if (toggleIcon && theme) {
                toggleIcon.textContent = theme.icon;
                toggleIcon.style.animation = 'none';
                toggleIcon.offsetHeight; // 触发重绘
                toggleIcon.style.animation = 'icon-bounce 0.5s ease';
            }
            
            // 保存主题偏好到localStorage
            localStorage.setItem('theme', themeName);
            
            // 应用主题特效
            applyThemeEffects(themeName);
            
            // 重新初始化图表以适应新主题
            setTimeout(() => {
                initActivityChart();
                body.classList.remove('theme-changing');
            }, 300);
        }
        
        // 应用主题特效
        function applyThemeEffects(themeName) {
            switch(themeName) {
                case 'light':
                    applyLightModeEffects();
                    break;
                case 'dark':
                    applyDarkModeEffects();
                    break;
                case 'work':
                    applyWorkModeEffects();
                    break;
                case 'reading':
                    applyReadingModeEffects();
                    break;
                case 'creative':
                    applyCreativeModeEffects();
                    break;
            }
        }
        
        // 浅色模式特效
        function applyLightModeEffects() {
            // 重置所有特殊效果
            const particles = document.querySelectorAll('.theme-particle');
            particles.forEach(p => p.remove());
        }
        
        // 深色模式特效
        function applyDarkModeEffects() {
            // 添加星空背景粒子
            createStarParticles();
        }
        
        // 工作模式特效
        function applyWorkModeEffects() {
            // 添加专注模式指示器
            showFocusIndicator();
        }
        
        // 阅读模式特效
        function applyReadingModeEffects() {
            // 优化字体和行距
            const content = document.querySelectorAll('.post-content, .intro-text');
            content.forEach(el => {
                el.style.lineHeight = '1.8';
                el.style.fontSize = '1.05rem';
            });
        }
        
        // 创意模式特效
        function applyCreativeModeEffects() {
            // 添加彩虹光晕效果
            createRainbowGlow();
        }
        
        // 创建星空粒子
        function createStarParticles() {
            const container = document.getElementById('particles-container');
            if (!container) return;
            
            // 清除现有主题粒子
            const existingStars = container.querySelectorAll('.star-particle');
            existingStars.forEach(s => s.remove());
            
            // 创建星星
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'particle star-particle';
                star.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 3 + 1}px;
                    height: ${Math.random() * 3 + 1}px;
                    background: white;
                    border-radius: 50%;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    opacity: ${Math.random() * 0.8 + 0.2};
                    animation: twinkle ${Math.random() * 3 + 2}s ease-in-out infinite;
                    animation-delay: ${Math.random() * 2}s;
                `;
                container.appendChild(star);
            }
        }
        
        // 显示专注指示器
        function showFocusIndicator() {
            let indicator = document.getElementById('focus-indicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'focus-indicator';
                indicator.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(102, 126, 234, 0.9);
                    color: white;
                    padding: 15px 30px;
                    border-radius: 10px;
                    font-size: 1.1rem;
                    font-weight: bold;
                    z-index: 9999;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
                `;
                document.body.appendChild(indicator);
            }
            
            indicator.textContent = '💼 专注模式已启用';
            indicator.style.opacity = '1';
            
            setTimeout(() => {
                indicator.style.opacity = '0';
            }, 2000);
        }
        
        // 创建彩虹光晕
        function createRainbowGlow() {
            let glow = document.getElementById('rainbow-glow');
            if (!glow) {
                glow = document.createElement('div');
                glow.id = 'rainbow-glow';
                glow.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    pointer-events: none;
                    z-index: 0;
                    background: radial-gradient(circle at 50% 50%, 
                        rgba(255, 182, 193, 0.1) 0%, 
                        rgba(221, 160, 221, 0.1) 25%, 
                        rgba(186, 225, 255, 0.1) 50%, 
                        rgba(255, 218, 185, 0.1) 75%, 
                        transparent 100%);
                    animation: rainbow-pulse 5s ease-in-out infinite;
                `;
                document.body.appendChild(glow);
            }
        }
        
        // GitHub API集成 - 加载仓库信息
        async function loadGitHubRepos() {
            const username = 'BaiYe-Ye';
            const reposContainer = document.getElementById('github-repos');
            
            if (!reposContainer) return;
            
            try {
                // 使用GitHub API获取仓库信息
                const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=6`);
                
                if (!response.ok) {
                    throw new Error(`GitHub API请求失败: ${response.status}`);
                }
                
                const repos = await response.json();
                
                // 渲染仓库列表
                renderGitHubRepos(repos, reposContainer);
                
                // 从仓库信息中提取技术栈
                extractTechStackFromRepos(repos);
            } catch (error) {
                console.error('加载GitHub仓库失败:', error);
                reposContainer.innerHTML = `<div class="loading" style="color: #ff6b6b;">加载GitHub仓库失败: ${error.message}</div>`;
                // 加载失败时显示默认技术栈
                loadDefaultTechStack();
            }
        }
        
        // 从GitHub仓库中提取技术栈
        function extractTechStackFromRepos(repos) {
            const techStackContainer = document.getElementById('tech-stack');
            if (!techStackContainer) return;
            
            // 统计仓库中使用的编程语言
            const languageStats = {};
            
            repos.forEach(repo => {
                if (repo.language) {
                    languageStats[repo.language] = (languageStats[repo.language] || 0) + 1;
                }
            });
            
            // 按使用频率排序
            const sortedLanguages = Object.entries(languageStats)
                .sort((a, b) => b[1] - a[1])
                .map(entry => entry[0]);
            
            // 添加一些默认技术栈（如果GitHub仓库中没有）
            const defaultLanguages = ['HTML/CSS', 'JavaScript', 'Python', 'Shell', '前端开发'];
            defaultLanguages.forEach(lang => {
                if (!sortedLanguages.includes(lang)) {
                    sortedLanguages.push(lang);
                }
            });
            
            // 渲染技术栈
            renderTechStack(sortedLanguages, techStackContainer);
        }
        
        // 渲染技术栈
        function renderTechStack(languages, container) {
            if (!languages || languages.length === 0) {
                container.innerHTML = '<div class="loading">没有找到技术栈信息</div>';
                return;
            }
            
            // 生成技术栈HTML
            const techStackHTML = languages.map(lang => {
                return `<span class="tech-tag">${lang}</span>`;
            }).join('');
            
            container.innerHTML = techStackHTML;
        }
        
        // 加载默认技术栈
        function loadDefaultTechStack() {
            const techStackContainer = document.getElementById('tech-stack');
            if (!techStackContainer) return;
            
            const defaultLanguages = ['HTML/CSS', 'JavaScript', 'Python', 'Shell', 'Java', '前端开发'];
            renderTechStack(defaultLanguages, techStackContainer);
        }
        
        // 渲染GitHub仓库列表
        function renderGitHubRepos(repos, container) {
            if (!repos || repos.length === 0) {
                container.innerHTML = '<div class="loading">没有找到GitHub仓库</div>';
                return;
            }
            
            // 生成仓库HTML
            const reposHTML = repos.map(repo => {
                // 获取语言颜色
                const languageColor = repo.language ? getLanguageColor(repo.language) : '#ccc';
                
                return `
                    <div class="github-repo-item">
                        <h4 class="repo-name">
                            <a href="${repo.html_url}" target="_blank" style="text-decoration: none; color: inherit;">
                                ${repo.name}
                            </a>
                        </h4>
                        <p class="repo-description">
                            ${repo.description || '没有描述'}
                        </p>
                        <div class="repo-meta">
                            ${repo.language ? `<span class="repo-language"><span class="language-color" style="background-color: ${languageColor};"></span>${repo.language}</span>` : ''}
                            <span class="repo-stars">⭐ ${repo.stargazers_count}</span>
                            <span class="repo-forks">🍴 ${repo.forks_count}</span>
                            <span class="repo-updated">📅 ${formatDate(repo.updated_at)}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            container.innerHTML = reposHTML;
        }
        
        // 获取编程语言对应的颜色
        function getLanguageColor(language) {
            const colorMap = {
                'JavaScript': '#f1e05a',
                'Python': '#3572A5',
                'HTML': '#e34c26',
                'CSS': '#563d7c',
                'Java': '#b07219',
                'C++': '#f34b7d',
                'C': '#555555',
                'C#': '#178600',
                'PHP': '#4F5D95',
                'Ruby': '#701516',
                'Go': '#00ADD8',
                'TypeScript': '#2b7489',
                'Shell': '#89e051',
                'Swift': '#ffac45',
                'Kotlin': '#F18E33',
                'Rust': '#dea584',
                'Scala': '#c22d40',
                'Dart': '#00B4AB',
                'Vue': '#41b883',
                'React': '#61dafb',
                'Angular': '#dd0031'
            };
            
            return colorMap[language] || '#ccc';
        }
        
        // 格式化日期
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffInDays = Math.floor((now - date) / (1000 * 60 * 60 * 24));
            
            if (diffInDays === 0) {
                return '今天';
            } else if (diffInDays === 1) {
                return '昨天';
            } else if (diffInDays < 7) {
                return `${diffInDays}天前`;
            } else if (diffInDays < 30) {
                const weeks = Math.floor(diffInDays / 7);
                return `${weeks}周前`;
            } else if (diffInDays < 365) {
                const months = Math.floor(diffInDays / 30);
                return `${months}个月前`;
            } else {
                const years = Math.floor(diffInDays / 365);
                return `${years}年前`;
            }
        }
        
        // 初始化活动图表
        function initActivityChart() {
            const ctx = document.getElementById('activity-chart');
            if (!ctx) return;
            
            // 模拟GitHub活动数据（12个月，按时间顺序）
            const activityData = {
                labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                datasets: [{
                    label: '活动次数',
                    data: [15, 22, 18, 25, 28, 20, 32, 28, 25, 19, 22, 27],
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    borderColor: 'rgba(102, 126, 234, 1)',
                    borderWidth: 3,
                    pointBackgroundColor: 'rgba(102, 126, 234, 1)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    fill: true,
                    tension: 0.4,
                    borderJoinStyle: 'round',
                    pointHitRadius: 10
                }]
            };
            
            // 深色模式下的颜色调整
            const isDarkMode = document.body.classList.contains('dark-mode');
            if (isDarkMode) {
                activityData.datasets[0].backgroundColor = 'rgba(136, 146, 176, 0.1)';
                activityData.datasets[0].borderColor = 'rgba(136, 146, 176, 1)';
                activityData.datasets[0].pointBackgroundColor = 'rgba(136, 146, 176, 1)';
            }
            
            // 配置图表
            const config = {
                type: 'line',
                data: activityData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'GitHub活动概览',
                            color: isDarkMode ? '#e0e0e0' : '#333',
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            padding: {
                                top: 10,
                                bottom: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: isDarkMode ? 'rgba(30, 30, 40, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                            titleColor: isDarkMode ? '#e0e0e0' : '#333',
                            bodyColor: isDarkMode ? '#aaa' : '#555',
                            borderColor: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)',
                            borderWidth: 1,
                            borderRadius: 8,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.y + ' 次';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: isDarkMode ? '#e0e0e0' : '#333',
                                stepSize: 10,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: isDarkMode ? '#e0e0e0' : '#333',
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart',
                        from: {
                            y: 0
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    elements: {
                        line: {
                            tension: 0.4
                        }
                    }
                }
            };
            
            // 创建图表
            new Chart(ctx, config);
        }
        
        // 监听DOM加载完成，初始化活动图表
        document.addEventListener('DOMContentLoaded', function() {
            initActivityChart();
        });
        
        // 粒子效果系统
        class ParticleSystem {
            constructor(containerId) {
                this.container = document.getElementById(containerId);
                if (!this.container) {
                    console.error('粒子容器未找到');
                    return;
                }
                
                this.particles = [];
                this.particleCount = 50;
                this.mouseX = 0;
                this.mouseY = 0;
                
                // 初始化事件监听
                this.initEventListeners();
                
                // 初始化粒子
                this.initParticles();
                
                // 开始动画循环
                this.animate();
            }
            
            // 初始化事件监听
            initEventListeners() {
                // 鼠标移动事件
                document.addEventListener('mousemove', (e) => {
                    this.mouseX = e.clientX;
                    this.mouseY = e.clientY;
                    
                    // 每移动鼠标创建一些跟随粒子
                    this.createMouseFollowerParticles(e.clientX, e.clientY);
                });
            }
            
            // 初始化粒子
            initParticles() {
                // 创建个性化粒子（名字首字母）
                this.createInitialParticles();
                
                // 创建情景化粒子（数据流）
                this.createDataStreamParticles();
                
                // 定期创建新粒子
                setInterval(() => {
                    // 随机创建不同类型的粒子
                    const particleType = Math.random();
                    if (particleType < 0.5) {
                        this.createInitialParticles(1);
                    } else {
                        this.createDataStreamParticles(1);
                    }
                }, 1000);
            }
            
            // 创建个性化粒子（名字首字母）
            createInitialParticles(count = 20) {
                for (let i = 0; i < count; i++) {
                    const particle = this.createParticle('initial');
                    particle.textContent = Math.random() > 0.5 ? '白' : '夜';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDuration = (Math.random() * 8 + 5) + 's';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    this.container.appendChild(particle);
                    this.particles.push(particle);
                }
            }
            
            // 创建行为化粒子（鼠标跟随）
            createMouseFollowerParticles(x, y) {
                for (let i = 0; i < 3; i++) {
                    const particle = this.createParticle('mouse-follower');
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.transform = `translate(-50%, -50%) scale(0)`;
                    
                    // 添加跟随动画
                    setTimeout(() => {
                        particle.style.transition = 'all 0.5s ease-out';
                        particle.style.transform = `translate(-50%, -50%) scale(1) translateY(-${Math.random() * 50 + 20}px) translateX(${Math.random() * 40 - 20}px)`;
                        particle.style.opacity = '0';
                    }, 10);
                    
                    this.container.appendChild(particle);
                    this.particles.push(particle);
                    
                    // 动画结束后移除粒子
                    setTimeout(() => {
                        this.removeParticle(particle);
                    }, 500);
                }
            }
            
            // 创建情景化粒子（数据流）
            createDataStreamParticles(count = 20) {
                for (let i = 0; i < count; i++) {
                    const particle = this.createParticle('data-stream');
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDuration = (Math.random() * 6 + 4) + 's';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    this.container.appendChild(particle);
                    this.particles.push(particle);
                }
            }
            
            // 创建单个粒子
            createParticle(type) {
                const particle = document.createElement('div');
                particle.className = `particle ${type}`;
                return particle;
            }
            
            // 移除粒子
            removeParticle(particle) {
                if (particle && particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                    this.particles = this.particles.filter(p => p !== particle);
                }
            }
            
            // 动画循环
            animate() {
                // 定期清理过期粒子
                this.particles.forEach(particle => {
                    if (particle.style.opacity === '0') {
                        this.removeParticle(particle);
                    }
                });
                
                // 继续动画循环
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // 彩蛋系统 - 键盘序列检测
        let easterEggSequence = [];
        const secretSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        
        // 监听键盘事件
        document.addEventListener('keydown', function(e) {
            // 添加按键到序列
            easterEggSequence.push(e.key);
            
            // 保持序列长度与秘密序列一致
            if (easterEggSequence.length > secretSequence.length) {
                easterEggSequence.shift();
            }
            
            // 检查是否匹配秘密序列
            if (easterEggSequence.join(',') === secretSequence.join(',')) {
                showEasterEgg();
                // 重置序列
                easterEggSequence = [];
            }
        });
        
        // 显示彩蛋
        function showEasterEgg() {
            const easterEgg = document.getElementById('hidden-easter-egg');
            if (easterEgg) {
                easterEgg.classList.add('show');
                
                // 创建庆祝粒子效果
                createCelebrationParticles();
            }
        }
        
        // 关闭彩蛋
        function closeEasterEgg() {
            const easterEgg = document.getElementById('hidden-easter-egg');
            if (easterEgg) {
                easterEgg.classList.remove('show');
            }
        }
        
        // 创建庆祝粒子效果
        function createCelebrationParticles() {
            const container = document.getElementById('easter-egg-container');
            if (!container) return;
            
            const particleCount = 100;
            const emojis = ['🎉', '🎊', '🎁', '✨', '💫', '⭐', '🌟'];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'celebration-particle';
                particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                
                // 随机位置和样式
                const size = Math.random() * 40 + 20;
                const startX = Math.random() * window.innerWidth;
                const startY = Math.random() * window.innerHeight;
                const duration = Math.random() * 3 + 2;
                const rotation = Math.random() * 360;
                const endX = startX + (Math.random() - 0.5) * 200;
                const endY = startY + (Math.random() - 0.5) * 200 - 100;
                
                particle.style.cssText = `
                    position: absolute;
                    left: ${startX}px;
                    top: ${startY}px;
                    font-size: ${size}px;
                    opacity: 1;
                    pointer-events: none;
                    z-index: 9999;
                    animation: celebration-float ${duration}s ease-out forwards;
                    transform: rotate(${rotation}deg);
                `;
                
                container.appendChild(particle);
                
                // 动画结束后移除粒子
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, duration * 1000);
            }
        }
        
        // 个人彩蛋 - 生日祝福
        function checkBirthday() {
            const now = new Date();
            const month = now.getMonth();
            const day = now.getDate();
            
            // 假设生日是1月1日
            if (month === 0 && day === 1) {
                setTimeout(() => {
                    alert('🎂 生日快乐！感谢你访问我的博客！🎂');
                }, 1000);
            }
        }
        
        // 访客记忆 - 重复访客欢迎
        function checkReturningVisitor() {
            const visitCount = parseInt(localStorage.getItem('visit-count') || '0');
            const lastVisit = localStorage.getItem('last-visit');
            
            // 更新访问计数
            localStorage.setItem('visit-count', (visitCount + 1).toString());
            localStorage.setItem('last-visit', new Date().toISOString());
            
            // 欢迎重复访客
            if (visitCount >= 1) {
                setTimeout(() => {
                    console.log(`🎉 欢迎回来！这是你第 ${visitCount + 1} 次访问我的博客！`);
                    // 可以在这里添加更明显的欢迎信息
                }, 1000);
            }
        }
        
        // 初始化彩蛋系统
        function initEasterEggs() {
            // 绑定关闭彩蛋按钮事件
            const closeBtn = document.getElementById('close-easter-egg');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeEasterEgg);
            }
            
            // 检查是否是生日
            checkBirthday();
            
            // 检查是否是重复访客
            checkReturningVisitor();
        }
        
        // 监听主题切换事件，重新初始化图表
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    // 延迟初始化，等待主题切换完成
                    setTimeout(initActivityChart, 300);
                });
            }
            
            // 初始化粒子系统
            new ParticleSystem('particles-container');
            
            // 初始化彩蛋系统
            initEasterEggs();
            
            // 恢复阅读进度
            restoreReadingProgress();
        });
    </script>
</body>
</html>